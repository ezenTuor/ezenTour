<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="config.mybatis.mapper.oracle.ezentour">
	<insert id="insertMember" parameterType="memberVo">
		<selectKey keyProperty="user_no" resultType="int" order="BEFORE">
			select member_seq.nextval from dual
		</selectKey>
		insert into member(user_no,user_id,user_pwd,name,zipcode,
			address,address_detail,hp1,hp2,hp3,email1,email2,grade,user_ssr,gender
			,regdate)
		values(#{user_no},#{user_id},#{user_pwd},#{name},#{zipcode},
			#{address},#{address_detail},#{hp1},#{hp2},#{hp3},#{email1},#{email2},
			#{grade},#{user_ssr},#{gender},sysdate)
	</insert>

	<select id="selectMember" parameterType="string" resultType="memberVo">
		select * from member
		where user_id=#{user_id} and deldate is null
	</select>
	
	<select id="selectPwd" parameterType="string" resultType="string">
		select user_pwd from member 
		where user_id=#{user_id} and deldate is null
	</select>
	<select id="selectDup" parameterType="string" resultType="int">
		select count(*) from member
		where user_id=#{user_id}
	</select>
	<update id="memberUpdate" parameterType="memberVo">
		update member
		set zipcode = #{zipcode}, address = #{address}, 
		address_detail = #{address_detail}, hp1 = #{hp1}, hp2 = #{hp2}, 
		hp3 = #{hp3}, email1 = #{email1}, email2 = #{email2}
		where user_id=#{user_id};
	</update>
	<update id="delMember">
		update member
		set del_flag = 1, deldate = sysdate
		where user_id= ?;
	</update>
</mapper>









